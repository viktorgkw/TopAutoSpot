@page
@using TopAutoSpot.Data.Models.Enums;
@model TopAutoSpot.Views.AuctionViews.JoinedAuctionsModel
@{
    ViewData["Title"] = "Joined Auctions";
}

<div class="pt-3">
    <h1 class="website-text-darker-nohover fw-bold">All Joined Auctions</h1>
    <p class="fw-bold website-text-nohover"><i>Here you will see all the auctions you have joined.</i></p>
    <hr />
</div>

@if (Model.Auctions.Count == 0)
{
    <h3 class="text-danger fw-bold fs-4">You haven't joined any auctions yet!</h3>

    <br />

    <img class="custom-rounded account-management-image mt-3 mb-3" src="~/gifs/noAuctions.gif" />
}
else
{
    <div class="mt-3 mb-5">
        <h2 class="website-text-nohover fw-bold">Joined Auctions</h2>
        <hr />
        <br />

        <div class="d-flex flex-row flex-wrap mt-3">
            @foreach (var auction in Model.Auctions)
            {
                @if (auction.Status == AuctionStatusTypes.Active.ToString())
                {
                    <div class="row">
                        <a asp-page="/AuctionViews/AuctionPreview" asp-route-id="@auction.Id" class="text-decoration-none site-text-color-btn fw-bold car-title mb-1">
                            <img class="listing-image custom-rounded" src="@Model.GetAuctionImage(auction.Id)" />

                            @if (auction.Title.Length > 22)
                            {
                                <p class="fs-4 fw-bold website-text-darker-nohover">@string.Join("", auction.Title.Take(22))..</p>
                            }
                            else
                            {
                                <p class="fs-4 fw-bold website-text-darker-nohover">@auction.Title</p>
                            }
                        </a>

                        <p class="fs-4 fw-bold website-text-nohover">Start: $@auction.StartingPrice</p>

                        <div>
                            <a class="btn btn-outline-danger fw-bold" asp-page="/AuctionViews/Leave" asp-route-id="@auction.Id">Leave</a>
                        </div>
                    </div>
                }
                else
                {
                    <div class="row">
                        <a asp-page="/AuctionViews/AuctionBid" asp-route-id="@auction.Id" class="text-decoration-none site-text-color-btn fw-bold car-title mb-1">
                            <img class="listing-image custom-rounded" src="@Model.GetAuctionImage(auction.Id)" />

                            @if (auction.Title.Length > 22)
                            {
                                <p class="fs-4 fw-bold website-text-darker-nohover">@string.Join("", auction.Title.Take(22))..</p>
                            }
                            else
                            {
                                <p class="fs-4 fw-bold website-text-darker-nohover">@auction.Title</p>
                            }
                        </a>

                        <p class="fs-4 fw-bold website-text-nohover">Start: $@auction.StartingPrice</p>
                    </div>
                }
            }
        </div>

        <br />
        <hr />
    </div>
}